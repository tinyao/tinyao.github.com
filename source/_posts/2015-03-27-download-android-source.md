---
date: 2015-03-27 14:39
title: '记 Android 源码下载'
---

为了深入研究下Android，最近打算拖个源码下来看看。两年前简单修改编译过一次4.0的，这回打算下的是Android 5.1。为了保证源码纯正，虽然墙在，但还是从官网下载最好，期间各种痛楚。

<!-- more --> 

### First Blood

当然首先得翻，用得是自己在 Do 上搭的 Shadowsocks。配合proxychains4在终端上代理用。准备工作完后开始 repo sync，最初速度保持在 200k 左右，而后一段时间后 100k 左右。中间因为网络不稳定还中断过几次，还好 repo sync 是可以接上同步。先后同步了好几次，终于在某个时候到 99%了，这时候已经 24G 了。

忘了补充了，之前本预计源码15G最多了吧，没想到大大出乎预料。导致校园网流量频繁被榨干，先后充值了好多次。。。

99% 之后，终端日志就不动了，但源码文件夹大小还在涨，也不知道是不是真的在同步。最后同步到了 28G 左右，终端始终停在99%没有新的Log了，怕被坑，先停了。

### Second Blood

由于本地同步，看不到头。于是就暂时开了一台新的Do机子，考虑源码肯定30G以上了，于是就配了SFO 40G的。同步速度6M以上飞，大概几十分钟就全下完了。本想直接在上面打包一下源码，再下载。打包压缩过程中，磁盘空间又不够了。看了下磁盘利用率，Android源码估计36G以上。如果直接去拖文件夹，一个文件一个文件的批量下，速度肯定也慢。

### Third Blood

于是只好再开一台机子三藩40G的机子，ssh远程tar压缩打包，结果是20多G，可能压缩不够也不管了。然后就建个apache服务，移动到网站目录。开始用迅雷拖，还不错，速度保持在 1M 以上。

最后，终于把源码拖下来了。


